import"../css/style.css";document.addEventListener("DOMContentLoaded",()=>{const e=document.querySelector("#show-books"),t=document.querySelector(".nav-list"),n=document.querySelector(".menu-toggle"),o=document.querySelector(".menu-close");function i(e){t.classList.toggle("hidden",!e),o.classList.toggle("hidden",!e),n.classList.toggle("hidden",e)}n.addEventListener("click",()=>i(!0)),o.addEventListener("click",()=>i(!1));document.querySelector(".search-button").addEventListener("click",()=>{!async function(){const t=document.querySelector("#category").value.trim().toLowerCase();if(!t)return void alert("Inserisci una categoria prima di cercare.");const{default:n}=await import("axios"),{default:o}=await import("lodash"),i=`https://openlibrary.org/subjects/${t}.json`;try{const t=(await n.get(i)).data;if(!o.get(t,"works.length",0))return alert("Nessun libro trovato per questa categoria."),void(e.style.display="none");e.style.display="flex",e.style.flexDirection="column",e.style.alignItems="center",e.style.justifyContent="center",e.innerHTML="",t.works.forEach(t=>{const i=document.createElement("div");i.classList.add("book-card");const s=document.createElement("p");s.classList.add("book-title"),s.textContent=t.title;const r=document.createElement("div");if(r.classList.add("book-authors"),o.get(t,"authors.length",0))t.authors.forEach(e=>{const t=document.createElement("p");t.textContent=`Autore: ${e.name}`,t.classList.add("author-name"),r.appendChild(t)});else{const e=document.createElement("p");e.textContent="Autore non disponibile",r.appendChild(e)}const c=document.createElement("button");c.classList.add("description-btn"),c.textContent="Descrizione";const a=document.createElement("div");a.classList.add("book-description");const d=document.createElement("p");a.appendChild(d),c.addEventListener("click",async()=>{if("block"!==a.style.display)try{const e=`https://openlibrary.org${t.key}.json`,o=(await n.get(e)).data;let i="Descrizione non disponibile";o.description&&("string"==typeof o.description?i=o.description:o.description.value&&(i=o.description.value)),d.textContent=`Descrizione: ${i}`,a.style.display="block"}catch(e){console.error("Errore nel recupero della descrizione:",e),d.textContent="Errore durante il recupero della descrizione.",a.style.display="block"}else a.style.display="none"}),i.appendChild(s),i.appendChild(r),i.appendChild(c),i.appendChild(a),e.appendChild(i)})}catch(t){console.error("Errore durante il fetch dei libri:",t),alert("Si Ã¨ verificato un errore nel recupero dei dati."),e.style.display="none"}}()})});